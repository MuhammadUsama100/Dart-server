<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous" />

</head>

<body>
    <table>
        <tr>
            <td>
                <h1>
                    MUHAMMAD USAMA GSOC 2021
                </h1>

            </td>
            <td>
                <button type="button" class="btn btn-primary" onclick="get()">Get List</button>
            </td>
        </tr>
    </table>




    <table class="table" id="GSOC">
        <thead>
            <tr>
                <th scope="col">NAME</th>
                <th scope="col">AGE </th>
                <th scope="col">DIS</th>

            </tr>
        </thead>
        <tbody>


        </tbody>
    </table>

    <script>
        function get() {
            // var xhttp = new XMLHttpRequest();
            // xhttp.open("GET", , true);
            // xhttp.responseType = 'text';

            // xhttp.onload = function () {
            //     console.log(xhttp.response)
            // };

            let request = new XMLHttpRequest();
            request.open('GET', "http://localhost:8080/users/list.com");

            fetch("http://localhost:8080/users/list").then(function (response) {
                response.text().then(function (text) {
                    // var obj = JSON.parse('{"1": {"Name": "Muhammad Usama", "Age": "20", "Dis": "CS Student"}, "2": {"Name": "jonas", "Age": "23", "Dis": "Teacher"}}');
                    var obj = JSON.parse(text)
                    console.log(obj)
                    obj.forEach(element => {


                        var table = document.getElementById("GSOC").getElementsByTagName('tbody')[0];
                        var row = table.insertRow(0);

                        var cell1 = row.insertCell(0);
                        var cell2 = row.insertCell(1);
                        var cell3 = row.insertCell(2);

                        // Add some text to the new cells:
                        cell1.innerHTML = element["Name"];
                        cell2.innerHTML = element["Age"];
                        cell3.innerHTML = element["Dis"];
                    });

                });
            });
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous">
        </script>

</body>

</html>